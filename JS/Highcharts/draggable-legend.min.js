!function (e) { var t = e.addEvent, i = e.defined, n = (e.each, e.wrap); n(e.Legend.prototype, "render", function (e) { e.apply(this, Array.prototype.slice.call(arguments, 1)); var t = this, i = t.options, n = i.padding || 5, r = t.contentGroup.getBBox(!0); r.width + 2 * n > t.options.width && (t.options.width = Math.ceil(r.width) + 2 * n, e.apply(this, Array.prototype.slice.call(arguments, 1))), !t.resizer && i.resizable && (t.addResizer(), t.bindResizerEvents()), t.resizer && (t.alignResizer(), t.contentGroup.attr({ translateY: parseFloat(t.itemStyle.fontSize) + 4 })), t.alignContentGroup(r, n) }), e.Legend.prototype.addResizer = function () { this.resizer = this.chart.renderer.path(["M", 0, 10, "L", 10, 10, "L", 10, 0, "L", 11, 0, "L", 11, 11, "L", 0, 11, "Z"]).attr({ "stroke-width": 10, stroke: "transparent", fill: "black" }).css({ cursor: "se-resize", "pointer-events": "stroke" }).add(this.group) }, e.Legend.prototype.bindResizerEvents = function () { function n(e) { var t = g.group.getBBox(!0); e = d.pointer.normalize(e), s = e.chartY, h = e.chartX, l = g.options.width || t.width, a = g.options.height || t.height, d.isResizingLegend = !0 } function r(e) { if (d.isResizingLegend) { e = d.pointer.normalize(e); var t = e.chartY - s, n = e.chartX - h, r = g.options, o = r.padding || 5, p = g.contentGroup.getBBox(!0); e.preventDefault(), r.width = Math.min(Math.max(p.width + o, l + n), d.containerWidth - 20 - (r.floating ? r.x : 5)), r.height = r.maxHeight = Math.min(Math.max(60, a + t), d.containerHeight - 20 - (r.floating ? r.y : 5)), g.group.placed = !1, i(g.currentPage) && (g.currentPage = 1, g.scroll(-g.currentPage + 1, !1)), g.render(), g.alignContentGroup(p, o), d.pointer.selectionMarker && (d.pointer.selectionMarker = d.pointer.selectionMarker.destroy()) } } function o() { d.isResizingLegend && g.update(), d.isResizingLegend = !1 } var a, l, h, s, g = this, d = (g.options, g.chart); d.isResizingLegend = !1, d.removeResizableEvents && e.each(d.removeResizableEvents, function (e) { e() }), d.removeResizableEvents = [t(g.resizer.element, "mousedown", n), t(d.container, "mousemove", r), t(document, "mouseup", o), t(g.resizer.element, "touchstart", n), t(d.container, "touchmove", r), t(document, "touchend", o)] }, e.Legend.prototype.alignContentGroup = function (e, t) { var i = this.title ? this.title.getBBox(!0).height : 0, n = this.nav ? this.clipHeight + t : e.height - i; this.contentGroup.placed = !1, this.contentGroup.align({ align: "center", verticalAlign: this.nav ? "top" : "middle", x: -Math.round(e.width / 2) - 2 * t, y: this.nav ? i : -Math.round(n / 2) - (this.title ? 0 : t) }, !0, this.box.getBBox(!0)) }, e.wrap(e.Legend.prototype, "scroll", function (e, t) { return this.chart.afterLegendUpdate && 0 === t ? e.apply(this, [t, !1]) : e.apply(this, Array.prototype.slice.call(arguments, 1)) }), e.wrap(e.Legend.prototype, "handleOverflow", function (e) { var t = e.apply(this, Array.prototype.slice.call(arguments, 1)); return i(this.options.height) ? this.options.height : t }), e.Legend.prototype.alignResizer = function () { var e = this, t = e.resizer.getBBox(), i = 5; e.options.floating ? (e.resizer.show(), e.resizer.placed = !1, e.resizer.align({ align: "right", verticalAlign: "bottom" }, !0, { width: e.legendWidth - t.width - i, height: e.legendHeight - t.height - i, x: 0, y: 0 })) : e.resizer.hide() }, n(e.Legend.prototype, "destroy", function (e) { return this.resizer && (this.chart.legend.options.x, this.resizer = this.resizer.destroy(), void 0 != GlobalchartObj.legend && (0 == this.chart.legend.options.x && 0 == this.chart.legend.options.y ? (GlobalchartObj.legend.x = 0, GlobalchartObj.legend.y = 0, GlobalchartObj.legend.width = void 0, GlobalchartObj.legend.verticalAlign = "bottom", GlobalchartObj.legend.floating = !1) : (GlobalchartObj.legend.x = this.chart.legend.options.x, GlobalchartObj.legend.y = this.chart.legend.options.y, GlobalchartObj.legend.verticalAlign = "top", GlobalchartObj.legend.floating = !0, GlobalchartObj.legend.width = this.chart.legend.options.width))), e.apply(this, Array.prototype.slice.call(arguments, 1)) }), n(e.Legend.prototype, "render", function (i) { function n(e) { v = 0, e = b.pointer.normalize(e), s = e.chartX, g = e.chartY, d = m.x, p = m.y, c = y.group.attr("translateX"), u = y.group.attr("translateY"), h = !0, y.options.floating || (d = c = y.group.attr("translateX"), p = u = y.group.attr("translateY")) } function r(t) { if (h && !b.isResizingLegend) { t = b.pointer.normalize(t); var i = t.chartX - s, n = t.chartY - g; t.preventDefault(), c + i > 0 && c + i + y.legendWidth < b.chartWidth && u + n > 0 && u + n + y.legendHeight < b.chartHeight && (v = Math.max(Math.abs(i), Math.abs(n)), v > 2 && (m.x = d + i, m.y = p + n, m.floating = !0, m.verticalAlign = "top", y.group.placed = !1, y.group.align(e.extend({ width: y.legendWidth, height: y.legendHeight }, m), !0, "spacingBox"), y.positionCheckboxes())), b.pointer.selectionMarker && (b.pointer.selectionMarker = b.pointer.selectionMarker.destroy()) } } function o() { h && v && !b.isResizingLegend && (b.afterLegendUpdate = !0, m.y + y.legendHeight > .9 * b.chartHeight ? b.update({ legend: { x: 0, y: 0, floating: !1, verticalAlign: "bottom", layout: "horizontal", width: 0, height: null } }) : b.update({ legend: { floating: !0 } })), h = !1 } function a() { m.x + y.legendWidth > b.containerWidth && (m.x = b.containerWidth - y.legendWidth - 10, y.group.placed = !1, y.group.align(e.extend({ width: y.legendWidth, height: y.legendHeight }, m), !0, "spacingBox"), y.positionCheckboxes()) } var l = !this.group; i.apply(this, Array.prototype.slice.call(arguments, 1)); var h, s, g, d, p, c, u, v, y = this, b = y.chart, m = y.options; m.draggable && y.group && l && (b.removeDraggableEvents && e.each(b.removeDraggableEvents, function (e) { e() }), y.group.css({ cursor: "move" }), b.removeDraggableEvents = [t(y.group.element, "mousedown", n), t(b.container, "mousemove", r), t(document, "mouseup", o), t(y.group.element, "touchstart", n), t(b.container, "touchmove", r), t(document, "touchend", o), t(b, "redraw", a)]) }) }(Highcharts);